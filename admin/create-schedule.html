<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Create Schedule ¬∑ Admin</title>

  <script src="https://cdn.tailwindcss.com"></script>

  <script type="module" defer src="/middleware/auth-guard.js"></script>
  <script type="module" defer src="/js/layout/loadAdminNavbar.js"></script>
  <script type="module" defer src="/js/admin/createSchedule.js"></script>

  <style>
    .hidden-step { display: none; }

    .form-section {
      animation: stepIn .45s ease forwards;
    }
    @keyframes stepIn {
      from { opacity:0; transform:translateY(16px); }
      to { opacity:1; transform:translateY(0); }
    }

    .step-dot {
      width:40px;height:40px;border-radius:999px;
      background:#e5e7eb;color:#475569;
      display:flex;align-items:center;justify-content:center;
      font-weight:700;
    }
    .step-dot.active {
      background:linear-gradient(135deg,#2563eb,#4f46e5);
      color:white;
      box-shadow:0 0 0 4px rgba(37,99,235,.2);
    }

    .input-card {
      background:#ffffff;
      border:1px solid #e5e7eb;
      border-radius:16px;
      padding:16px;
    }

    .label {
      font-size:.7rem;
      font-weight:600;
      color:#475569;
      text-transform:uppercase;
      letter-spacing:.04em;
      margin-bottom:6px;
      display:block;
    }

    .input {
      width:100%;
      padding:10px 12px;
      border-radius:12px;
      border:1px solid #e5e7eb;
      background:#f8fafc;
      font-size:.875rem;
      transition:all .2s ease;
      outline:none;
    }
    .input:focus {
      background:#fff;
      border-color:#2563eb;
      box-shadow:0 0 0 3px rgba(37,99,235,.15);
    }

    .section-header {
      display:flex;
      align-items:center;
      gap:12px;
      margin-bottom:10px;
    }
    .section-icon {
      width:38px;height:38px;
      border-radius:12px;
      background:linear-gradient(135deg,#2563eb,#4f46e5);
      color:white;
      display:flex;
      align-items:center;
      justify-content:center;
      font-size:18px;
    }

    .time-wrapper {
      position:relative;
    }
    .time-wrapper::before {
      content:"üïí";
      position:absolute;
      left:12px;
      top:50%;
      transform:translateY(-50%);
      font-size:14px;
      opacity:.6;
    }
    .time-wrapper input {
      padding-left:36px;
    }

    .eq-card {
      border:1px solid #e5e7eb;
      border-radius:14px;
      padding:14px;
      text-align:center;
      cursor:pointer;
      background:#ffffff;
      transition:all .2s ease;
    }
    .eq-card:hover {
      transform:translateY(-2px);
      box-shadow:0 10px 20px rgba(0,0,0,.08);
    }
    .eq-card.selected {
      background:#eff6ff;
      border-color:#2563eb;
    }
  </style>
</head>

<body class="bg-slate-100 min-h-screen text-slate-800">

<div id="adminNavbar"></div>

<main class="max-w-4xl mx-auto px-4 py-10 space-y-8">

  <!-- HEADER -->
  <section>
    <h1 class="text-3xl font-bold">Create Operation Schedule</h1>
    <p class="text-sm text-slate-500 mt-1">
      Guided workflow to prevent OT, staff, and equipment conflicts
    </p>
  </section>

  <!-- STEPPER -->
  <section class="bg-white rounded-2xl shadow-sm p-5 flex justify-between">
    <div class="flex gap-4">
      <span class="step-dot active">1</span>
      <span class="step-dot">2</span>
      <span class="step-dot">3</span>
      <span class="step-dot">4</span>
    </div>
  </section>

  <!-- ================= STEP 1 ================= -->
  <section class="form-section bg-white rounded-2xl p-8 space-y-6">
    <div class="section-header">
      <div class="section-icon">üßæ</div>
      <h2 class="text-lg font-semibold">Patient & Procedure</h2>
    </div>

    <div class="grid md:grid-cols-2 gap-5">
      <div class="input-card">
        <label class="label">Patient ID</label>
        <input id="patientIdInput" class="input"/>
      </div>

      <div class="input-card">
        <label class="label">Patient Name</label>
        <input id="patientNameInput" class="input"/>
      </div>

      <div class="input-card">
        <label class="label">Department</label>
        <select id="departmentSelect" class="input"></select>
      </div>

      <div class="input-card">
        <label class="label">Procedure *</label>
        <input id="procedureInput" class="input"/>
      </div>

      <div class="input-card md:col-span-2">
        <label class="label">Clinical Notes</label>
        <textarea id="notesInput" rows="3" class="input"></textarea>
      </div>
    </div>

    <div class="flex justify-end">
      <button id="step1NextBtn"
        class="bg-blue-600 hover:bg-blue-700 transition text-white px-6 py-2 rounded-xl">
        Continue ‚Üí
      </button>
    </div>
  </section>

  <!-- ================= STEP 2 ================= -->
  <section class="form-section hidden-step bg-white rounded-2xl p-8 space-y-6">
    <div class="section-header">
      <div class="section-icon">üè•</div>
      <h2 class="text-lg font-semibold">OT, Date & Staff</h2>
    </div>

    <div class="grid md:grid-cols-3 gap-5">
      <div class="input-card">
        <label class="label">Date</label>
        <input id="scheduleDateInput" type="date" class="input"/>
      </div>

      <div class="input-card">
        <label class="label">OT Room</label>
        <select id="otRoomSelect" class="input"></select>
      </div>

      <div class="input-card md:col-span-3">
        <label class="label">Equipment</label>
        <div id="equipmentGrid" class="grid grid-cols-2 md:grid-cols-4 gap-4 mt-2"></div>
        <button id="loadExternalEquipmentBtn" type="button"
          class="mt-3 text-sm text-blue-600 font-semibold">
          + Add equipment from other OT rooms
        </button>
      </div>

      <div class="input-card md:col-span-3">
        <label class="label">OT Staff</label>
        <select id="otStaffSelect" multiple class="input h-32"></select>
      </div>

      <div class="input-card">
        <label class="label">Start Time</label>
        <div class="time-wrapper">
          <input id="startTimeInput" type="time" class="input"/>
        </div>
      </div>

      <div class="input-card">
        <label class="label">End Time</label>
        <div class="time-wrapper">
          <input id="endTimeInput" type="time" class="input"/>
        </div>
      </div>
    </div>

    <div class="flex justify-between">
      <button id="step2BackBtn" class="border px-6 py-2 rounded-xl">‚Üê Back</button>
      <button id="step2NextBtn"
        class="bg-blue-600 hover:bg-blue-700 transition text-white px-6 py-2 rounded-xl">
        Continue ‚Üí
      </button>
    </div>
  </section>

  <!-- ================= STEP 3 ================= -->
  <section class="form-section hidden-step bg-white rounded-2xl p-8 space-y-6">
    <div class="section-header">
      <div class="section-icon">üë®‚Äç‚öïÔ∏è</div>
      <h2 class="text-lg font-semibold">Doctor Assignment</h2>
    </div>

    <div class="grid md:grid-cols-2 gap-5">
      <div class="input-card">
        <label class="label">Surgeon</label>
        <select id="surgeonSelect" class="input"></select>
      </div>
    </div>

    <div class="flex justify-between">
      <button id="step3BackBtn" class="border px-6 py-2 rounded-xl">‚Üê Back</button>
      <button id="step3NextBtn"
        class="bg-blue-600 hover:bg-blue-700 transition text-white px-6 py-2 rounded-xl">
        Review ‚Üí
      </button>
    </div>
  </section>

  <!-- ================= STEP 4 ================= -->
  <section class="form-section hidden-step bg-white rounded-2xl p-8 space-y-6">
    <div class="section-header">
      <div class="section-icon">‚úÖ</div>
      <h2 class="text-lg font-semibold">Review & Confirm</h2>
    </div>

    <div class="space-y-2 text-sm">
      <p><strong>Patient:</strong> <span id="rvPatient"></span></p>
      <p><strong>Procedure:</strong> <span id="rvProcedure"></span></p>
      <p><strong>OT Room:</strong> <span id="rvOT"></span></p>
      <p><strong>Surgeon:</strong> <span id="rvSurgeon"></span></p>
    </div>

    <div class="flex justify-between">
      <button id="step4BackBtn" class="border px-6 py-2 rounded-xl">‚Üê Back</button>
      <button id="confirmScheduleBtn"
        class="bg-emerald-600 hover:bg-emerald-700 transition text-white px-6 py-2 rounded-xl">
        Confirm Schedule
      </button>
    </div>
  </section>

</main>
</body>
</html>

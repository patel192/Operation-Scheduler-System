<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>OT Command Center · Admin</title>

  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>


  <!-- Lucide Icons -->
  <script src="https://unpkg.com/lucide@latest"></script>

  <script type="module" defer src="/middleware/auth-guard.js"></script>
  <script type="module" defer src="/js/layout/loadAdminNavbar.js"></script>
  <script type="module" defer src="/js/admin/dashboard.js"></script>

  <style>
    /* Smooth entry animation */
    .fade-up {
      animation: fadeUp 0.5s ease forwards;
    }

    @keyframes fadeUp {
      from {
        opacity: 0;
        transform: translateY(8px);
      }

      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    /* Ongoing pulse */
    .pulse-amber {
      animation: pulseAmber 2s infinite;
    }

    @keyframes pulseAmber {

      0%,
      100% {
        background-color: rgb(254 243 199);
      }

      50% {
        background-color: rgb(253 230 138);
      }
    }
  </style>
</head>

<body class="bg-sky-50 text-slate-900 min-h-screen">

  <div id="adminNavbar"></div>

  <main class="max-w-[1700px] mx-auto px-5 py-5 grid grid-cols-12 gap-5">

    <!-- LEFT -->
    <section class="col-span-3 space-y-5 fade-up">

      <!-- HEALTH -->
      <div class="bg-white rounded-2xl p-5 border shadow-sm">
        <div class="flex items-center gap-2 text-sky-700">
          <i data-lucide="activity"></i>
          <h3 class="font-semibold">System Health</h3>
        </div>

        <p id="healthScore" class="text-4xl font-bold text-sky-700 mt-4">
          0%
        </p>

        <div class="mt-4 space-y-2 text-sm">
          <div class="flex justify-between items-center">
            <span class="flex gap-2 items-center text-slate-600">
              <i data-lucide="hospital" class="w-4"></i> OT Utilization
            </span>
            <span id="otUtilization" class="font-semibold text-blue-600">0%</span>
          </div>

          <div class="flex justify-between items-center">
            <span class="flex gap-2 items-center text-slate-600">
              <i data-lucide="stethoscope" class="w-4"></i> Equipment Load
            </span>
            <span id="equipmentUtilization" class="font-semibold text-emerald-600">0%</span>
          </div>

          <div class="flex justify-between items-center">
            <span class="flex gap-2 items-center text-slate-600">
              <i data-lucide="users" class="w-4"></i> Staff Busy
            </span>
            <span id="staffUtilization" class="font-semibold text-amber-600">0%</span>
          </div>
        </div>
      </div>

      <!-- ALERTS -->
      <div class="bg-white rounded-2xl p-5 border shadow-sm">
        <div class="flex items-center gap-2 text-red-600 mb-3">
          <i data-lucide="alert-triangle"></i>
          <h3 class="font-semibold">Critical Alerts</h3>
        </div>

        <ul id="alertsList" class="text-sm space-y-2 text-red-700">
          <li class="text-slate-400">No active alerts</li>
        </ul>
      </div>

    </section>

    <!-- CENTER -->
    <section class="col-span-6 space-y-5 fade-up">

      <!-- LIVE OPS -->
      <div class="bg-white rounded-2xl border shadow-sm">
        <div class="px-5 py-3 border-b bg-sky-100 rounded-t-2xl flex items-center gap-2">
          <i data-lucide="clock" class="text-sky-700"></i>
          <h2 class="font-semibold text-sky-900">
            Live Surgeries
          </h2>
        </div>

        <div id="liveOperations" class="divide-y"></div>

        <div id="noLiveOps" class="hidden py-6 text-center text-slate-400">
          No surgeries currently in progress
        </div>
      </div>

      <!-- TODAY -->
      <div class="bg-white rounded-2xl border shadow-sm">
        <div class="px-5 py-3 border-b flex items-center gap-2">
          <i data-lucide="calendar-days"></i>
          <h2 class="font-semibold">
            Today’s OT Schedule
          </h2>
        </div>

        <div class="overflow-x-auto">
          <table class="w-full text-sm">
            <thead class="bg-slate-100 text-slate-600">
              <tr>
                <th class="p-3 text-left">Patient</th>
                <th class="p-3">OT</th>
                <th class="p-3">Time</th>
                <th class="p-3">Surgeon</th>
                <th class="p-3">Status</th>
              </tr>
            </thead>
            <tbody id="todayTable" class="divide-y"></tbody>
          </table>
        </div>
      </div>
      <!-- ===== CHARTS ===== -->
      <div class="grid grid-cols-2 gap-4 p-4 border-t bg-slate-50">

        <!-- USER DISTRIBUTION -->
        <div class="bg-white rounded-xl p-4 border shadow-sm">
          <h4 class="text-sm font-semibold mb-2 flex items-center gap-2">
            <i data-lucide="users"></i> Staff Distribution
          </h4>
          <canvas id="userChart" height="140"></canvas>
        </div>

        <!-- DEPARTMENT LOAD -->
        <div class="bg-white rounded-xl p-4 border shadow-sm">
          <h4 class="text-sm font-semibold mb-2 flex items-center gap-2">
            <i data-lucide="layers"></i> Department Load (Today)
          </h4>
          <canvas id="deptChart" height="140"></canvas>
        </div>

      </div>

    </section>

    <!-- RIGHT -->
    <section class="col-span-3 space-y-5 fade-up">

      <div class="bg-white rounded-2xl p-5 border shadow-sm">
        <h3 class="font-semibold flex items-center gap-2 mb-3">
          <i data-lucide="layout-grid"></i> OT Rooms
        </h3>
        <ul id="otList" class="text-sm space-y-1"></ul>
      </div>

      <div class="bg-white rounded-2xl p-5 border shadow-sm">
        <h3 class="font-semibold flex items-center gap-2 mb-3">
          <i data-lucide="cpu"></i> Equipment In Use
        </h3>
        <ul id="equipmentList" class="text-sm space-y-1"></ul>
      </div>

      <div class="bg-white rounded-2xl p-5 border shadow-sm">
        <h3 class="font-semibold flex items-center gap-2 mb-3">
          <i data-lucide="user-check"></i> Staff Occupancy
        </h3>
        <ul id="staffList" class="text-sm space-y-1"></ul>
      </div>

    </section>

  </main>

  <script>
    lucide.createIcons();
  </script>

</body>

</html>